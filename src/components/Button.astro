---
import arrow from '../assets/arrow.svg';

interface Props {
	href?: string;
	variant?: 'primary' | 'secondary';
	class?: string;
	showArrow?: boolean;
	target?: string;
	rel?: string;
}

const { 
	href, 
	variant = 'primary', 
	class: className, 
	showArrow = true,
	target,
	rel 
} = Astro.props;
const Element = href ? 'a' : 'button';
---

<Element 
	href={href}
	target={target}
	rel={rel}
	class:list={['btn', `btn--${variant}`, showArrow ? '' : 'btn--no-arrow', className]}
>
	<slot />
	{showArrow && (
		<div class="btn__arrow">
			<img src={arrow.src} alt="" aria-hidden="true" />
		</div>
	)}
</Element>

<style>
	.btn {
		position: relative;
		display: inline-flex;
		align-items: center;
		gap: 1.2rem;
		padding: .35rem .55rem .35rem 1.5rem;
		font-family: var(--font-display);
		font-size: 1.25rem;
		font-weight: 400;
		text-transform: capitalize;
		border: 1px solid var(--color-accent);
		border-radius: 5rem;
		background: transparent;
		color: var(--color-accent);
		cursor: pointer;
		transition: all 0.3s ease;
		overflow: hidden;
		z-index: 1;
	}

	.btn:hover {
		background: var(--color-accent-dim);
		border-color: var(--color-accent);
		color: var(--color-accent);
	}

	.btn__arrow {
		display: flex;
		align-items: right;
		justify-content: right;
		width: 35px;
		height: 35px;
		transition: transform 0.3s ease;
		animation: pulse 1.6s ease-in-out infinite;
	}

	.btn--no-arrow {
		gap: 0.75rem;
		padding-right: 1.5rem;
	}

	.btn__arrow img {
		width: 100px;
		object-fit: contain;
		display: block;
	}

	.btn:hover .btn__arrow {
		transform: translateY(2px);
	}

	@keyframes pulse {
		0% { transform: translateY(0); }
		50% { transform: translateY(3px); }
		100% { transform: translateY(0); }
	}

	.btn--secondary {
		border-color: var(--color-accent);
		color: var(--color-accent);
	}

	.btn--secondary:hover {
		background: var(--color-accent-dim);
	}

	@media (max-width: 768px) {
		.btn {
			font-size: 1.25rem;
			padding: 0.4rem 0.6rem 0.4rem 1.25rem;
			gap: 1rem;
		}

		.btn__arrow {
			width: 36px;
			height: 36px;
		}

		.btn__arrow img {
			width: 80px;
		}

		.btn--no-arrow {
			padding-right: 1.25rem;
		}
	}
</style>
